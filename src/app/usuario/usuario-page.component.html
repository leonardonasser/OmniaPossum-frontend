<app-page-header title="Motoristas" pretitle="Listagem">
    <div slot="right">
        <button nz-button nzType="primary" (click)="novo()">
            <i nz-icon nzType="plus"></i>
            Novo Usuário
        </button>
    </div>
</app-page-header>

<nz-card [nzTitle]="title" class="card-table">
    <ng-template #title>
        <form class="d-flex" (ngSubmit)="listar()">
            <div class="flex-fill">
                <nz-input-group [nzPrefix]="prefixIconSearch" class="input-group-flush">
                    <input
                            type="text"
                            nz-input
                            placeholder="Pesquisar por nome..."
                            name="searchInput"
                            [(ngModel)]="filtros.search"
                    />
                </nz-input-group>

                <ng-template #prefixIconSearch>
                    <i nz-icon nzType="search"></i>
                </ng-template>
            </div>

            <button nz-button>Pesquisar</button>
        </form>

    </ng-template>

    <nz-table
        #table
        [nzData]="motoristas"
        [nzLoading]="loading"
    >
        <thead>
        <tr>
            <th>#</th>
            <th>Nome</th>
            <th>CPF</th>
            <th>E-mail</th>
            <th>Tipo</th>
            <th>Situação</th>
            <th>Opções</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let data of table.data">
            <td>{{ data.id }}</td>
            <td>{{ data.nome }}</td>
            <td>{{ data.cpf }}</td>
            <td>{{ data.email }}</td>
            <td>{{data.role}}</td>
            <td>
                <nz-tag [nzColor]="tagColor(data.situacao)">
                    {{ data.situacao }}
                </nz-tag>
            </td>
            <td class="td-actions">
                <button nz-button nzSize="small" nz-tooltip nzTooltipTitle="Editar" (click)="editar(data)">
                    <i nz-icon nzType="edit"></i>
                </button>

                <button nz-button nzSize="small" nz-tooltip nzTooltipTitle="Remover" (click)="remover(data)">
                    <i nz-icon nzType="delete"></i>
                </button>
            </td>
        </tr>
        </tbody>
    </nz-table>
</nz-card>
